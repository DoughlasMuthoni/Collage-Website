
{% extends 'base.html' %}
{% load static %}

{% block content %}
    <div id="carouselExample" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="{% static 'assets\images\mwala_img4.jpg' %}" class="d-block w-100 carousel-zoom" alt="Slide 1">
                <div class="carousel-caption">
                    <h1>Welcome to Mwala Technical and Vocational College</h1>
                    <p>The Future Belongs to Those Who See Possibilities Today</p>
                    <a href="{% url 'mwala_app:allCourses' %}"><button class="btn btn-blue">Find a Course</button></a>
                    <a href="{% url 'mwala_app:onlineApplication' %}"><button class="btn btn-green">Apply Now</button></a>
                </div>
            </div>
            <div class="carousel-item">
                <img src="{% static 'assets\images\mwala_img3.jpg' %}" class="d-block w-100 carousel-zoom" alt="Slide 2">
                <div class="carousel-caption">
                    <h1>Empowering the Next Generation</h1>
                    <p>Join Us to Unlock Your Potential</p>
                    <a href="{% url 'mwala_app:allCourses' %}"><button class="btn btn-blue">Explore Programs</button></a>
                    <a href="{% url 'mwala_app:allCourses' %}"><button class="btn btn-green">Get Started</button></a>
                </div>
            </div>
            <div class="carousel-item">
                <img src="{% static 'assets\images\mwala_img4.jpg' %}" class="d-block w-100 carousel-zoom" alt="Slide 3">
                <div class="carousel-caption">
                    <h1>Transforming Lives Through Education</h1>
                    <p>Your Future Starts Here</p>
                    <a href="{% url 'mwala_app:allCourses' %}"><button class="btn btn-blue">Get Started</button></a>
                    <a href="{% url 'mwala_app:onlineApplication' %}"><button class="btn btn-green">Apply</button></a>
                </div>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
   
    
    <div class="container-fluid position-relative" style="margin-top: -100px; z-index: 10;">
        <div class="row justify-content-center text-decoration-none gx-3 gy-4">
            <!-- Service Charter Box -->
            <div class="col-12 col-sm-6 col-md-4">
                <div class="card text-center border-0 shadow-lg" style="background-color: green; color: black;">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center" style="min-height: 200px;">
                        <i class="bi bi-file-text" style="font-size: 3rem; color: red;"></i>
                        <h5 class="card-title mt-3" style="text-align:center;">Service Charter</h5>
                        <a href="{% url 'mwala_app:serviceCharter' %}">
                            <p class="card-text view" style="text-align:center; color:white;">View our charter</p>
                        </a>
                    </div>
                </div>
            </div>
    
            <!-- Services Box -->
            <div class="col-12 col-sm-6 col-md-4">
                <div class="card text-center border-0 shadow-lg" style="background-color: green; color: black;">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center" style="min-height: 200px;">
                        <i class="bi bi-gear" style="font-size: 3rem; color: red;"></i>
                        <h5 class="card-title mt-3" style="text-align:center;">Services</h5>
                        <a href="{% url 'mwala_app:mwalaServices' %}">
                            <p class="card-text view" style="text-align:center; color:white;">List of Services</p>
                        </a>
                    </div>
                </div>
            </div>
    
            <!-- Student Downloads Box -->
            <div class="col-12 col-sm-6 col-md-4">
                <div class="card text-center border-0 shadow-lg" style="background-color: green; color: black;">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center" style="min-height: 200px;">
                        <i class="bi bi-download" style="font-size: 3rem; color: red;"></i>
                        <h5 class="card-title mt-3 content-c" style="text-align:center;">Student Downloads</h5>
                        <a href="{% url 'mwala_app:all_notices' %}">
                            <p class="card-text view content-c" style="text-align:center; color:white;">List of Student forms</p>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    
    
    <div class="container my-5 note">
        <!-- Notice Section -->
        <div class="notices-section">
            <div class="notices-header">
                IMPORTANT NOTICES <span class="text-danger">!!!</span>
            </div>
            <div class="notices-body">
                {% for notice in notices %}
                    <!-- Notice Item -->
                    <a href="{{ notice.uploadNotice.url }}" class="text-decoration-none">
                        <div class="notices-item d-flex align-items-center justify-content-between">
                            <div>
                                {% if notice.uploadNotice %}
                                    <span>{{ notice.title }}</span>
                                {% else %}
                                    <span class="text-danger">{{ notice.title }} (No file uploaded)</span> 
                                {% endif %}
                            </div>
                            <div class="d-flex align-items-center">
                                <span class="notices-item-date me-3">
                                    <i class="bi bi-calendar3 text-danger"></i> {{ notice.date|date:"F Y" }}
                                </span>
                                {% if notice.uploadNotice %}
                                    <i class="bi bi-download text-success" style="font-size: 1.2rem;"></i>
                                {% endif %}
                            </div>
                        </div>
                    </a>
                {% empty %}
                    <p class="text-center p-3 text-danger">No notices available at the moment.</p>
                {% endfor %}
            </div>
            <div class="notices-footer">
                <a href="{% url 'mwala_app:all_notices' %}"> View All College Notices →</a>
            </div>
        </div>
    </div>
    
    
    <div class="container my-2">
        <h2 class="text-start text-success py-2 px-3 rounded d-flex align-items-center">
            <i class="fas fa-calendar-alt me-2"></i> News and Events
        </h2>
        <div class="row g-4">
            <!-- Display the first 3 news -->
            {% for news_item in limited_news %}
            <div class="col-md-4 d-flex">
                <div class="card h-100 flex-fill">
                    <a href="{% url 'mwala_app:news_details' news_id=news_item.id %}" style="text-decoration: none;">
                        <img src="{{ news_item.image.url }}" class="card-img-top-news img-fluid" alt="{{ news_item.title }}">
                    </a>
                    <div class="card-body">
                        <a href="{% url 'mwala_app:news_details' news_id=news_item.id %}" style="text-decoration: none;">
                            <h5 class="card-title">{{ news_item.title }}</h5>
                        </a>
                        <p class="card-text">
                            {{ news_item.description|truncatechars:150|safe }}
                        </p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        
        
        <!-- View All Button -->
        <div class="col-12 mt-4 text-center">
            <a href="{% url 'mwala_app:newsEvents' %}" class="btn btn-outline-danger">
                View All News <i class="fas fa-arrow-right"></i>
            </a>
        </div>
        
        

    <div class="jobs-section container my-5">
        <h2 class="text-start text-success py-2 px-3 rounded d-flex align-items-center">
            <i class="fas fa-briefcase me-2"></i> Jobs and Vacancies
        </h2>
        <div class="row">
            {% for jobs in job_vacancies %}
                <div class="col-md-6 mb-4">
                    <div class="job-card card  shadow-sm p-3 rounded-3">
                        <h5 class="card-title text-primary mb-2">
                            <i class="fas fa-briefcase me-2"></i> {{ jobs.position }}
                        </h5>
                        <p class="mb-1 text-danger"><strong>Deadline:</strong> {{ jobs.deadlineDate }}</p>
                        {% if jobs.uploadJobs %}
                            <a href="{{ jobs.uploadJobs.url }}" class="btn btn-success btn-sm mt-2">
                                <i class="fas fa-download me-1"></i> Download
                            </a>
                        {% else %}
                        <a href="#" class="btn btn-success btn-sm mt-2">
                            <i class="fas fa-download me-1"></i> NO job Uploaded yet
                        </a>
                        {% endif %}
                        <div class="mt-3">
                            <a href="{{ jobs.uploadJobs.url }}" class="text-decoration-none text-primary">
                                Open <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            {% empty %}
                <p class="text-danger mt-2"><i class="fas fa-exclamation-circle me-1"></i> No Job uploaded</p>  
            {% endfor %}
            <div class="col-12 mt-4 text-center">
                <a href="{% url 'mwala_app:JobsVacancies' %}" class="btn btn-outline-primary">
                    View All Jobs <i class="fas fa-arrow-right"></i>
                </a>
            </div>
        </div>
        


    <div class="container py-2">
        <h2 class="text-center mb-2 text-white rounded" style="padding: 5px; background-color: #007bff ; border-bottom: 2px solid red;">OUR PROGRAMS</h2>
        <div class="row row-cols-1 row-cols-md-3 g-4">
            
           
            
            {% for level, courses in courses_by_level.items %}
            <div class="col">
                <div class="program-card h-100">
                    <h5>{{ level|title }} Courses</h5>
                    <ul>
                        {% for course in courses %}
                            <li>{{ course.course_name }}</li>
                        {% empty %}
                            <li>No courses available for this level.</li>
                        {% endfor %}
                    </ul>
                    <!-- Absolute URL for "View More" -->
                    <a href="/courses/{{ level|slugify }}/">View More</a>
                </div>
            </div>

        {% empty %}
        <p class="text-danger mt-4 "><i class="fas fa-exclamation-circle me-1 "></i> No programs uploaded yet</p>
        {% endfor %}
        
        </div>
        <div class="notices-footer mt-2">
            <a href="{% url 'mwala_app:allCourses' %}">View All Programs →</a>
          </div>

    </div>

    <section class="department-cards py-5">
        <div class="container">
            <div class="text-center mb-4">
                <h2 class="text-white py-3 rounded" style="background-color: #0098DB; border-bottom: 2px solid red;">MWALA TECHNICAL & VOCTIONAL COLLAGE DEPARTMENTS</h2>
            </div>
            <div class="row text-center">
                <!-- Card 1 -->
                 {% for department in departments %}
                    <div class="col-md-4 mb-4 d-flex">
                        <div class="card border-primary h-100 w-100">
                        {% if department.image %}
                           <a href="{% url 'mwala_app:department_details' department.id %}"> <img src="{{ department.image.url }}" class="card-img-top-news" alt="{{ department.title }}"></a>
                        {% else %}
                            <a href="{% url 'mwala_app:department_details' department.id %}"><img src="{% static 'assets\images\default_img.jpeg' %}" class="card-img-top-news " alt="{{ department.title }}"></a>
                        {% endif %}
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title text-primary">{{ department.title }}</h5>
                                <p class="card-text text-dark">{{ department.description|truncatechars:120 }}</p>
                                <a href="{% url 'mwala_app:department_details' department.id %}" class="btn btn-link text-danger mt-auto">View the department →</a>
                            </div>
                        </div>
                    </div>
                {% empty %}
                <p class="text-danger mt-2"><i class="fas fa-exclamation-circle me-1"></i> No Departments uploaded Yet</p>
                {% endfor %}
            </div>
            <div class="col-12 mt-4 text-center">
                <a href="{% url 'mwala_app:departments' %}" class="btn btn-outline-danger">
                    View All Departments <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            
        </div>
    </section>


    <div class="container-fluid p-0 py-0"style="max-height: 700px;">
        <div class="row g-0 text-center">
            <!-- Vision -->
            <div class="col-md-4">
                <div class="card border-0 text-white" style="height:300px;" >
                    <div class="card-body position-relative bg-dark bg-opacity-50" style="background-image: url('static/assets/images/mwala_img1.jpg'); background-size: cover; background-position: center; height: 100vh;">
                        <div class="overlay position-absolute top-0 start-0 w-100 h-100" style="background-color: rgba(0, 0, 0, 0.7);"></div>
                        <div class="position-relative z-1">
                            <div class="icon mb-3">
                                <i class="fas fa-trophy text-warning fs-1"></i>
                            </div>
                            <h4 class="card-title fw-bold">Vision</h4>
                            <p class="card-text text-white">
                                A Centre of Excellence in Technical Training for Employable Workforce. 
                            </p>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- Mission -->
            <div class="col-md-4">
                <div class="card border-0 text-white" style="height:300px;">
                    <div class="card-body position-relative bg-dark bg-opacity-50" style="background-image: url('static/assets/images/mwala_img3.jpg'); background-size: cover; background-position: center; height: 100vh;">
                        <div class="overlay position-absolute top-0 start-0 w-100 h-100" style="background-color: rgba(0, 0, 0, 0.7);"></div>
                        <div class="position-relative z-1">
                            <div class="icon mb-3">
                                <i class="fas fa-bullseye text-primary fs-1"></i>
                            </div>
                            <h4 class="card-title fw-bold">Mission</h4>
                            <p class="card-text text-white">
                                To Produce Competent Employable Graduates by Facilitating Learning, Research and
                                Innovative Dissemination of Knowledge, Skills and Productive Work Attitudes to Meet SocioEconomic and Cultural Needs of the Citizens of Kenya and Beyond. 
                            </p>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- motto -->
            <div class="col-md-4">
                <div class="card border-0 text-white"  style="height:300px;">
                    <div class="card-body position-relative bg-dark bg-opacity-50" style="background-image: url('static/assets/images/mwala_img4.jpg'); background-size: cover; background-position: center; height: 100vh;">
                        <div class="overlay position-absolute top-0 start-0 w-100 h-100" style="background-color: rgba(0, 0, 0, 0.7);"></div>
                        <div class="position-relative z-1">
                            <div class="icon mb-3">
                                <i class="fas fa-briefcase text-success fs-1"></i>
                            </div>
                            <h4 class="card-title fw-bold">Motto</h4>
                            <p class="card-text text-white">
                                Unlocking Knowledge, Skills and Work Behaviour in The Heart of Africa
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container-fluid bg-brown text-dark py-4">
        <div class="text-center">
            <h2 class="fw-bold">
                <i class="fas fa-cogs me-2"></i> OUR CORE VALUES
            </h2>
            <p class="mt-2">
                <span class="fw-semibold">Accountability</span> &bull; 
                <span class="fw-semibold">Professionalism</span> &bull; 
                <span class="fw-semibold">Integrity</span> &bull; 
                <span class="fw-semibold">Respect</span> &bull; 
                <span class="fw-semibold">Diversity, Equity, and Inclusion</span>
            </p>
        </div>
    </div>
    
    <div class="container py-2">
        <div class="row align-items-center">
            <!-- Left Section: Image -->
            <div class="col-md-6">
                <img src="{% static 'assets\images\mwala_img4.jpg' %}" alt="Core Values Image" class="img-fluid rounded shadow-sm">
            </div>
    
            <!-- Right Section: Content -->
            <div class="col-md-6">
                <ul class="nav nav-tabs mb-3" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="core-functions-tab" data-bs-toggle="tab" data-bs-target="#core-functions" type="button" role="tab" aria-controls="core-functions" aria-selected="true">
                            Core Functions
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="why-join-tab" data-bs-toggle="tab" data-bs-target="#why-join" type="button" role="tab" aria-controls="why-join" aria-selected="false">
                            Why Join Mwala TVC
                        </button>
                    </li>
                </ul>
    
                <div class="tab-content" id="myTabContent">
                    <!-- Core Functions -->
                    <div class="tab-pane fade show active" id="core-functions" role="tabpanel" aria-labelledby="core-functions-tab">
                        <h3 class="text-primary fw-bold">Core Functions</h3>
                        <ul class="list-unstyled">
                            <li>
                                <i class="fas fa-check-circle text-success "></i>
                                Team Work and Academic Excellence 
                            </li>
                            <li>
                                <i class="fas fa-check-circle text-success "></i>
                                Professional and Academic Integrity 
                            </li>
                            <li>
                                <i class="fas fa-check-circle text-success "></i>
                                Leadership, Service, Social Justice, and Entrepreneurship
                            </li>
                            <li>
                                <i class="fas fa-check-circle text-success "></i>
                                Creative and Innovative Thinking and Learning
                            </li>
                            <li>
                                <i class="fas fa-check-circle text-success "></i>
                                Diversity, Equity, and Inclusion
                            </li>
                            <li>
                                <i class="fas fa-check-circle text-success "></i>
                                Pride in Self, Community, and the College
                            </li>
                            <li>
                                <i class="fas fa-check-circle text-success "></i>
                                Accountability and Lifelong Learning
                            </li>
                        </ul>
                    </div>
    
                    <!-- Why Join -->
                    <div class="tab-pane fade" id="why-join" role="tabpanel" aria-labelledby="why-join-tab">
                        <h3 class="text-primary fw-bold">Why Join Mwala TVC</h3>
                        <p>
                            Mwala TVC offers a range of opportunities for growth and development in the TVET sector. Join us to access high-quality training, research, and innovation opportunities.
                            <ul>
                                <li>
                                     <strong>Qualified Faculty:</strong>Our dedicated faculty members have extensive technical and 
                                    academic expertise, ensuring that students receive the highest quality education.
                                </li>
                                <li>
                                     <strong>Industry Partnerships:</strong> We collaborate with industry leaders to ensure that our 
                                programs are aligned with current industry trends and demands.
                                </li>
                                <li>
                                   <strong>  Supportive Community: </strong>At Mwala Technical and Vocational College we foster a 
                                    supportive and inclusive community where students can thrive academically and 
                                    personally
                                </li>
                                
                            </ul>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    

    <div class="container py-5">
        <div class="row">
            <!-- FAQ Section -->
            <div class="col-md-6 mb-4">
                <h3 class="fw-bold mb-4">Frequently Asked Questions</h3>
                <div class="accordion" id="faqAccordion">
                    <!-- Question 1 -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="faqOneHeading">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqOne" aria-expanded="false" aria-controls="faqOne">
                                Where is Mwala TVC  located?
                            </button>
                        </h2>
                        <div id="faqOne" class="accordion-collapse collapse" aria-labelledby="faqOneHeading" data-bs-parent="#faqAccordion">
                            <div class="accordion-body text-danger">
                                Mwala Technical and Vocational College is a public Technical and Vocational Education Training Institution situated about 250 meters, off Makutano/Kithimani road, Mwala Sub county. The College is approximately 102.9 kilometers from Nairobi city and 36.9 kilometers East of Machakos Town. 
                            </div>
                        </div>
                    </div>
                    <!-- Question 2 -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="faqTwoHeading">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqTwo" aria-expanded="false" aria-controls="faqTwo">
                                Which  courses does Mwala TVC offer?
                            </button>
                        </h2>
                        <div id="faqTwo" class="accordion-collapse collapse" aria-labelledby="faqTwoHeading" data-bs-parent="#faqAccordion">
                            <div class="accordion-body  text-danger">
                                The College offers courses Accredited by Technical and Vocational Education and Training Authority (TVETA), in accordance with TVET) Act No. 29 of 2013. The College offers academic programmes spread across seven teaching departments; namely: Agriculture and Applied Sciences, Building and Civil Engineering, Business Studies and ICT, Electrical and Electronic Engineering, Fashion Design and Cosmetology, Hospitality and Tourism Management, Mechanical and Automotive Engineering.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="faqTwoHeading">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqTwo" aria-expanded="false" aria-controls="faqTwo">
                                Is Mwala Technical and Vocational Collage Courses Accredited and registered by the government?
                            </button>
                        </h2>
                        <div id="faqTwo" class="accordion-collapse collapse" aria-labelledby="faqTwoHeading" data-bs-parent="#faqAccordion">
                            <div class="accordion-body  text-danger">
                                The College offers courses Accredited by Technical and Vocational Education and Training Authority (TVETA), in accordance with TVET) Act No. 29 of 2013.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="faqTwoHeading">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqTwo" aria-expanded="false" aria-controls="faqTwo">
                               Can you apply for a course online?
                            </button>
                        </h2>
                        <div id="faqTwo" class="accordion-collapse collapse" aria-labelledby="faqTwoHeading" data-bs-parent="#faqAccordion">
                            <div class="accordion-body  text-danger">
                                Yes, you can. Use the following link:
                                Use our admissions on the website. http://127.0.0.1:8000/onlineApplication/
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="faqTwoHeading">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqTwo" aria-expanded="false" aria-controls="faqTwo">
                               Can i do more than one Course?
                            </button>
                        </h2>
                        <div id="faqTwo" class="accordion-collapse collapse" aria-labelledby="faqTwoHeading" data-bs-parent="#faqAccordion">
                            <div class="accordion-body text-danger">
                                Yes, you are free to register for more than one course.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="faqTwoHeading">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqTwo" aria-expanded="false" aria-controls="faqTwo">
                                Do you have Hostels at Mwala TVC?
                            </button>
                        </h2>
                        <div id="faqTwo" class="accordion-collapse collapse" aria-labelledby="faqTwoHeading" data-bs-parent="#faqAccordion">
                            <div class="accordion-body  text-danger">
                                Yes, we have hostels within our campus and provide food and accommodation to all our boarding students.


                            </div>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- About Section -->
            <div class="col-md-6 mb-4">
                <div class="p-4 bg-success text-white  shadow-sm">
                    <h3 class="fw-bold">About Mwala TVC</h3>
                    <p>
                        Mwala Technical and Vocational College is a public Technical and Vocational Education Training Institution 
                        situated about 250 meters, off Makutano/Kithimani road, Mwala Subcounty. The College is approximately 102.9 kilometers from Nairobi City and 36.9 kilometers East of Machakos Town.  
                    </p>
                    <p>
                        The College has a growing reputation for not only excellence in the delivery of vocational and technical training but also in nurturing the individual trainees as well as fostering entrepreneurship, innovation and enterprise.  This is reflected in the College’s Vision Statement, “A Centre of Excellence in Technical Training and Development of Employable Workforce”. 
                    </p>
                    <p>
                        The college is headed by a Chief Principal, Mr.  Kavita C. Kyuli who holds a Master of Science Degree in Human Resource Development from Moi University and a BSc. Agricultural Education and Extension, from Egerton University. The Chief Principal is also a Certified Monitoring & Evaluation Professional from Kenya Institute Management and a PhD Candidate in Human Resource Management of Jomo Kenyatta University of Agriculture and Technology (JKUAT). The Chief Principal, prior to his appointment as the 1st Principal of the Mwala Technical and Vocational College, served as a Deputy Principal in charge of Academics and Administration at Katine Technical Training Institute, Head of Department of Agriculture Education and Extension, Rift valley Institute of Science &Technology and Dean of Curriculum, Narok Teachers College. 
                    </p>
                    <p>
                        The College offers courses Accredited by Technical and Vocational Education and Training Authority (TVETA), in accordance with TVET) Act No. 29 of 2013.  The College offers academic programmes spread across seven teaching departments; namely: Agriculture and Applied Sciences, Building and Civil Engineering, Business Studies and ICT, Electrical and Electronic Engineering, Fashion Design and Cosmetology, Hospitality and Tourism Management, Mechanical and Automotive Engineering.
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <section class="department-cards py-1">
       
      
            <div class="container my-2 text-dark">
                <h1 class="gallery-title text-danger">Our Gallery</h1>
                <p class="gallery-description">
                  
                  Our gallery is a space for inspiration and connection. Come and discover 
                  the stories behind the faces that shape our college community.
                </p>
                <div class="row gy-4 gallery">
                    {% for image in first_8_images %}
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div class="card gallery-item">
                                <img src="{{ image.image.url }}" alt="Gallery Item {{ forloop.counter }}" 
                                    class="card-img-top img-fluid gallery-image"
                                    data-bs-toggle="modal" 
                                    data-bs-target="#imageCarouselModal"
                                    data-index="{{ forloop.counter0 }}"
                                    data-id="{{ image.id }}">
                                <div class="card-body-image">
                                    <p class="card-text text-danger">{{ image.date }}</p>
                                    <span>{{ image.title }}</span>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                
            
                  
        <!-- Modal for the Carousel -->
        <div class="modal fade" id="imageCarouselModal" tabindex="-1" aria-labelledby="imageCarouselModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="imageCarouselModalLabel">Mwala TVC Images</h5>
                <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
            </div>
            <div class="modal-body">
                <div id="carouselExample" class="carousel slide">
                <div class="carousel-inner" id="carouselItems"></div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon text-danger" aria-hidden="true"></span>
                    <span class="visually-hidden text-danger">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                    <span class="carousel-control-next-icon text-danger" aria-hidden="true"></span>
                    <span class="visually-hidden text-danger">Next</span>
                </button>
                </div>
            </div>
            </div>
        </div>
        </div>
                
    <script>
            const url = "{% url 'mwala_app:get_images_for_carousel' %}"; // URL rendered correctly

document.querySelectorAll('.gallery-item img').forEach((img) => {
    img.addEventListener('click', function() {
        const imageId = this.getAttribute('data-id');
        console.log('Clicked image with ID:', imageId);

        fetch(url)  // Using the generated URL
        .then(response => response.json())
        .then(data => {
            console.log('Data received from server:', data);

            // Check if data.images is defined
            if (!data.images) {
                console.error('Images data is missing in the response');
                return;
            }

            const carouselInner = document.querySelector('#carouselItems');
            carouselInner.innerHTML = ''; // Clear any previous items

            data.images.forEach((image, index) => {
                const isActive = index === parseInt(imageId) ? 'active' : '';
                const carouselItem = `
                    <div class="carousel-item ${isActive}">
                    <img src="${image.url}" class="d-block w-100" alt="Image ${index + 1}">
                    <div class="carousel-caption d-none d-md-block">
                        <p>${image.date}</p>
                    </div>
                    </div>
                `;
                carouselInner.insertAdjacentHTML('beforeend', carouselItem);
            });

            // Show the modal
            const modal = new bootstrap.Modal(document.getElementById('imageCarouselModal'));
            modal.show();
        })
        .catch(error => {
            console.error('Error fetching images:', error);
        });
    });
});

// Close the modal when the close button is clicked
document.querySelector('#imageCarouselModal ').addEventListener('click', function() {
    const modal = new bootstrap.Modal(document.getElementById('imageCarouselModal'));
    modal.hide();
});

    
    </script>

            </div>
                  <!-- View More Button -->
            <div class="text-center mt-4">
                <a href="{% url 'mwala_app:gallery' %}" class="btn btn-primary">View More</a>
            </div>
            </div>
   
    </section>
    

    <div class="container my-2">
        <div class="row">
            <!-- Principal Section -->
            {% if principal_message %}
                <div class="col-md-3 text-center text-dark">
                    {% if principal_message.image %}
                        <img src="{{ principal_message.image.url }}" class="img-fluid  mb-3" alt="{{ principal_message.title }}">
                    {% else %}
                        <img src="{% static 'assets\images\default_img.jpeg' %}" class="img-fluid  mb-3" alt="Default Principal">
                    {% endif %}
                        <h6 class="fw-bold">{{ principal_message.title }}</h6>
                        <p class="text-muted">{{ principal_message.position }}</p>
                </div>
    
                 <!-- Welcome Message -->
                <div class="col-md-6 text-dark">
                    <h2 class="text-danger fw-bold">Chief Principal Mwala TVC </h2>
                    <p>{{ principal_message.description|truncatechars:1200|safe }}</p>
                    
                    <a href="{% url 'mwala_app:principal_detail' %}" class="btn btn-primary">Read More</a>
                </div>
            {% else %}
                <p class="text-muted">Principal's message is not available at the moment.</p>
            {% endif %}
    
            <!-- Mission, Vision, Motto -->
            <div class="col-md-3 text-dark">
                <div class="mb-4">
                    <h4 class="text-danger fw-bold">Mission</h4>
                    <p> To Produce Competent Employable Graduates by Facilitating Learning, Research and
                        Innovative Dissemination of Knowledge, Skills and Productive Work Attitudes to Meet SocioEconomic and Cultural Needs of the Citizens of Kenya and Beyond. </p>
                </div>
                <div class="mb-4">
                    <h4 class="text-danger fw-bold">Vision</h4>
                    <p> A Centre of Excellence in Technical Training for Employable Workforce.  </p>
                </div>
                <div>
                    <h4 class="text-danger fw-bold">Motto</h4>
                    <p> Unlocking Knowledge, Skills and Work Behaviour in The Heart of Africa</p>
                </div>
            </div>
        </div>
    </div>
    <div class="container my-0 bg-transparent">
        <!-- Counter Section -->
        <div class="row text-center">
            <div class="col-md-3">
                <h1 class="fw-bold display-4 text-primary counter" data-target="84">0+</h1>
                <p>Programs</p>
            </div>
            <div class="col-md-3">
                <h1 class="fw-bold display-4 text-primary counter" data-target="44">0+</h1>
                <p>Number of Trainers</p>
            </div>
            <div class="col-md-3">
                <h1 class="fw-bold display-4 text-primary counter" data-target="3600">0+</h1>
                <p>Number of Graduands</p>
            </div>
            <div class="col-md-3">
                <h1 class="fw-bold display-4 text-primary counter" data-target="5">0+</h1>
                <p>Number of Departments</p>
            </div>
        </div>
    </div>
    <div class="container my-5">
        <!-- Partners Section -->
        <h2 class="text-center mb-4 text-danger">Our Partners</h2>
        <div class="row justify-content-center text-center align-items-center">
            <div class="col-6 col-md-4 col-lg-2 mb-4">
                <img src="{% static 'assets/images/knec_logo.png' %}" alt="Google" class="img-fluid rounded shadow-sm">
            </div>
            <div class="col-6 col-md-4 col-lg-2 mb-4">
                <img src="{% static 'assets/images/tveta_kenya.png' %}" alt="Google" class="img-fluid rounded shadow-sm">
            </div>
            <div class="col-6 col-md-4 col-lg-2 mb-4">
                <img src="{% static 'assets/images/katti-img.png' %}" alt="KATTI" class="img-fluid rounded shadow-sm">
            </div>
            <div class="col-6 col-md-4 col-lg-2 mb-4">
                <img src="{% static 'assets/images/tvet-curric.png' %}" alt="TVET" class="img-fluid rounded shadow-sm">
            </div>
            <div class="col-6 col-md-4 col-lg-2 mb-4">
                <img src="{% static 'assets/images/ministry-edu.png' %}" alt="Ministry of Education" class="img-fluid rounded shadow-sm">
            </div>
        </div>
    </div>
    
    <a href="https://wa.me/254796536524" class="whatsapp-icon" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
    </a>
    
{% endblock %}

 
 
